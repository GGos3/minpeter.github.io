<!doctype html><html lang=en dir=auto>
<head><meta charset=utf-8>
<meta http-equiv=x-ua-compatible content="IE=edge">
<meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no">
<meta name=robots content="index, follow">
<title>🐋 Docker swarm Orchestration | minpeter DEV blog</title>
<meta name=keywords content="docker,docker-swarm,server">
<meta name=description content="소개 해당 포스트는 도커안에 도커 (dind)기능을 이용해 로컬에서 클러스터와 유사한 환경을 구성하고,
docker swarm을 이용해 클러스터를 제어하는 Orchestration을 실습하는 방법에 대한 포스팅이다.
docker swarm, Orchestration이란? docker swarm은 kubernetes와 같은 Orchestration tool이다.
예를 들어 5대의 서버가 있다고 생각해보자
Orchestration tool을 사용하지 않을 경우는 각각 서버에 동일한 기능을 하도록 설정하거나, 각자 특정기능을 담당하는 식으로 설정해야될 것이다.
하지만 이 경우 특정 기능이나 서비스에 많은 요청이 들어올경우, 직접 수동으로 해당 서비스를 더 많이 만들어주어야 한다.">
<meta name=author content="minpeter">
<link rel=canonical href=http://minpeter.github.io/posts/server/2021-09-09-docker-swarm-orchestration/>
<meta name=google-site-verification content="RNVL00kQq_OXnyYh9S4hgL35tPhS5wdFNf_qNiXhxS8">
<link crossorigin=anonymous href=/assets/css/stylesheet.min.c88963fe2d79462000fd0fb1b3737783c32855d340583e4523343f8735c787f0.css integrity="sha256-yIlj/i15RiAA/Q+xs3N3g8MoVdNAWD5FIzQ/hzXHh/A=" rel="preload stylesheet" as=style>
<link rel=preload href=/icon.png as=image>
<script defer crossorigin=anonymous src=/assets/js/highlight.min.7680afc38aa6b15ddf158a4f3780b7b1f7dde7e91d26f073e6229bb7a0793c92.js integrity="sha256-doCvw4qmsV3fFYpPN4C3sffd5+kdJvBz5iKbt6B5PJI=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=http://minpeter.github.io/fav.ico>
<link rel=icon type=image/png sizes=16x16 href=http://minpeter.github.io/%3Clink%20/%20abs%20url%3E>
<link rel=icon type=image/png sizes=32x32 href=http://minpeter.github.io/fav.png>
<link rel=apple-touch-icon href=http://minpeter.github.io/%3Clink%20/%20abs%20url%3E>
<link rel=mask-icon href=http://minpeter.github.io/%3Clink%20/%20abs%20url%3E>
<meta name=theme-color content="#2e2e33">
<meta name=msapplication-TileColor content="#2e2e33">
<meta name=generator content="Hugo 0.91.2">
<noscript>
<style>#theme-toggle,.top-link{display:none}</style>
<style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style>
</noscript>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6FQKWLZK1S"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag('js',new Date),gtag('config','G-6FQKWLZK1S',{anonymize_ip:!1})}</script>
<meta property="og:title" content="🐋 Docker swarm Orchestration">
<meta property="og:description" content="소개 해당 포스트는 도커안에 도커 (dind)기능을 이용해 로컬에서 클러스터와 유사한 환경을 구성하고,
docker swarm을 이용해 클러스터를 제어하는 Orchestration을 실습하는 방법에 대한 포스팅이다.
docker swarm, Orchestration이란? docker swarm은 kubernetes와 같은 Orchestration tool이다.
예를 들어 5대의 서버가 있다고 생각해보자
Orchestration tool을 사용하지 않을 경우는 각각 서버에 동일한 기능을 하도록 설정하거나, 각자 특정기능을 담당하는 식으로 설정해야될 것이다.
하지만 이 경우 특정 기능이나 서비스에 많은 요청이 들어올경우, 직접 수동으로 해당 서비스를 더 많이 만들어주어야 한다.">
<meta property="og:type" content="article">
<meta property="og:url" content="http://minpeter.github.io/posts/server/2021-09-09-docker-swarm-orchestration/"><meta property="og:image" content="http://minpeter.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta property="article:section" content="posts">
<meta property="article:published_time" content="2021-09-09T11:12:00+09:00">
<meta property="article:modified_time" content="2021-09-09T11:12:00+09:00"><meta property="og:site_name" content="minpeter DEV blog">
<meta name=twitter:card content="summary_large_image">
<meta name=twitter:image content="http://minpeter.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E">
<meta name=twitter:title content="🐋 Docker swarm Orchestration">
<meta name=twitter:description content="소개 해당 포스트는 도커안에 도커 (dind)기능을 이용해 로컬에서 클러스터와 유사한 환경을 구성하고,
docker swarm을 이용해 클러스터를 제어하는 Orchestration을 실습하는 방법에 대한 포스팅이다.
docker swarm, Orchestration이란? docker swarm은 kubernetes와 같은 Orchestration tool이다.
예를 들어 5대의 서버가 있다고 생각해보자
Orchestration tool을 사용하지 않을 경우는 각각 서버에 동일한 기능을 하도록 설정하거나, 각자 특정기능을 담당하는 식으로 설정해야될 것이다.
하지만 이 경우 특정 기능이나 서비스에 많은 요청이 들어올경우, 직접 수동으로 해당 서비스를 더 많이 만들어주어야 한다.">
<script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"http://minpeter.github.io/posts/"},{"@type":"ListItem","position":2,"name":"🐋 Docker swarm Orchestration","item":"http://minpeter.github.io/posts/server/2021-09-09-docker-swarm-orchestration/"}]}</script>
<script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"🐋 Docker swarm Orchestration","name":"🐋 Docker swarm Orchestration","description":"소개 해당 포스트는 도커안에 도커 (dind)기능을 이용해 로컬에서 클러스터와 유사한 환경을 구성하고,\ndocker swarm을 이용해 클러스터를 제어하는 Orchestration을 실습하는 방법에 대한 포스팅이다.\ndocker swarm, Orchestration이란? docker swarm은 kubernetes와 같은 Orchestration tool이다.\n예를 들어 5대의 서버가 있다고 생각해보자\nOrchestration tool을 사용하지 않을 경우는 각각 서버에 동일한 기능을 하도록 설정하거나, 각자 특정기능을 담당하는 식으로 설정해야될 것이다.\n하지만 이 경우 특정 기능이나 서비스에 많은 요청이 들어올경우, 직접 수동으로 해당 서비스를 더 많이 만들어주어야 한다.","keywords":["docker","docker-swarm","server"],"articleBody":"소개 해당 포스트는 도커안에 도커 (dind)기능을 이용해 로컬에서 클러스터와 유사한 환경을 구성하고,\ndocker swarm을 이용해 클러스터를 제어하는 Orchestration을 실습하는 방법에 대한 포스팅이다.\ndocker swarm, Orchestration이란? docker swarm은 kubernetes와 같은 Orchestration tool이다.\n예를 들어 5대의 서버가 있다고 생각해보자\nOrchestration tool을 사용하지 않을 경우는 각각 서버에 동일한 기능을 하도록 설정하거나, 각자 특정기능을 담당하는 식으로 설정해야될 것이다.\n하지만 이 경우 특정 기능이나 서비스에 많은 요청이 들어올경우, 직접 수동으로 해당 서비스를 더 많이 만들어주어야 한다.\n하지만 Orchestration tool을 이용하면 설정값에 따라 특정 서비스를 생성하고 유지하기 때문에 부하가 많이 걸릴시 설정만 바꿔주면 되고 해당 작업 또한 자동화 할 수 있게된다.\n또 서비스를 업데이트 할때 서비스를 종료하지않고 배포하는 것이 가능하다.\n(특정 서버에 서비스를 몰아서 배치하는 것이 아닌 분산하여 배치하기 때문에 순차적으로 배포를 진행하면 중단하지 않고도 가능하다.)\n배포를 하였을때 해당 배포에 문제가 생긴 경우 배포를 중단하고 원래 배포전 상태로 돌려주고, 서비스에 문제가 생겨 종료된 경우 자동으로 재시작도 진행해준다.\n이처럼 서비스가 배포중에도 중단되지않고 꺼지지 않아야 하는 경우 사용하면 좋은 도구이다.\ndocker swarm에서 사용하는 용어 설명    이름 역활     compose 여러 컨테이너로 구성된 도커 애플리케션을 관리함   swarm 클러스터 구축 및 관리   service 기본적인 배포단위, swarm에서 클러스터 안의 서비스을 관리, 기본 docker에서 run과 비슷하다   stack swarm에서 여러 개의 서비스를 합함 전체 애플리케이션을 관리   node swarm 클러스터에 속한 도커 서버의 단위   manager node 스윔 클러스터의 상태를 관리하는 노드, 동시에 worker node가 될 수 있고, 여기에서만 swarm명령어를 실행할수 있다.   worker node manager node의 명령을 받아 컨테이너를 생성, 상태를 체크하는 노드   task 컨테이너 배포 단위, 서비스는 여러개의 task을 실행, task는 컨테이너를 관리한다    docker swarm 실습 docker swarm은 기본적으로 여러개의 서버를 관리하는 툴이다.\n하지만 우리가 실습할때는 대부분 노트북 하나만을 가지고 실습을 할 것이다.\n따라서 실제 환경과는 조금 다른 가상 실습환경을 만들것이다.\n다양한 방법이 있지만 dind (docker in docker)기능을 활용해서 도커 컨테이너를 각각 노드로 사용하여 실습하도록하겠다.\n(다른 방법으로는 vagrant을 이용해 가상머신을 생성해주거나 클라우드서비스를 이용해 실제 클러스터를 구현할수도)\ndocker compose을 이용해서 1개의 manager node(dind)와 3개의 worker node(dind)을 생성해줄것이다.\n참고한 기존 블로그 글에서는 registy컨테어너가 별도로 존재했지만 실습결과 딱히 필요성을 느끼지 못해 삭제하였다.\n(docker registy는 docker hub를 대체하는 로컬서버정도로 이해하면 될 것 같다.)\n가상클러스터 생성 docker-swarm 디렉토리를 생성하고 그 안에 아래의 코드를 참조해 파일을 만들어주자.\ndocker-compose.yaml\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52  version: \"3\" services: manager: container_name: manager image: docker:dind privileged: true tty: true ports: - 8000:80 - 9000:9000 depends_on: - registry expose: - 3375 volumes: - \"./stack:/stack\" worker01: container_name: worker01 image: docker:dind privileged: true tty: true depends_on: - manager - registry expose: - 7946 - 7946/udp - 4789/udp worker02: container_name: worker02 image: docker:dind privileged: true tty: true depends_on: - manager - registry expose: - 7946 - 7946/udp - 4789/udp worker03: container_name: worker03 image: docker:dind privileged: true tty: true depends_on: - manager - registry expose: - 7946 - 7946/udp - 4789/udp   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63  version: \"3\" services: registry: container_name: registry image: registry:latest ports: - 5000:5000 volumes: - \"./registry-data:/var/lib/registry\" manager: container_name: manager image: docker:dind privileged: true tty: true ports: - 8000:80 - 9000:9000 depends_on: - registry expose: - 3375 command: \"--insecure-registry registry:5000\" volumes: - \"./stack:/stack\" worker01: container_name: worker01 image: docker:dind privileged: true tty: true depends_on: - manager - registry expose: - 7946 - 7946/udp - 4789/udp command: \"--insecure-registry registry:5000\" worker02: container_name: worker02 image: docker:dind privileged: true tty: true depends_on: - manager - registry expose: - 7946 - 7946/udp - 4789/udp command: \"--insecure-registry registry:5000\" worker03: container_name: worker03 image: docker:dind privileged: true tty: true depends_on: - manager - registry expose: - 7946 - 7946/udp - 4789/udp command: \"--insecure-registry registry:5000\"   다음 아래의 명령어를 입력해주자\n1 2  $ docker compose up -d $ docker ps   이제 클러스터의 역활을 할 컨테이너가 4개 또는 5개가 생성된 것을 확인 할 수 있을 것이다.\nmanager 등록 원래 docker swarm init 명령어를 이용해 등록하면 되지만 현제 컨테이너 안에 가상클러스터를 실행했기 때문에 명령어 앞에 다음 명령어를 추가로 입력해주어야한다.\n1 2  $ docker exec -it (실행할 타겟, manager or worker) \\ (실행할 명령어)   따라서 메니저에서 docker swarm init 명령어를 실행하기 위해서는 다음 명령어를 실행하면 된다.\n1 2  $ docker exec -it manager \\ docker swarm init   명령어를 입력하면 아래에\n1  $ docker swarm join --token (토큰값) (메니저IP):(port)   형태로 출력될텐데 다음 명령어를 복사해주자.\nworker 등록 위에서 복사한 명령어를 worker에서 실행하면 우리가 만든 swarm 클러스터에 등록할 수 있다.\n다음과 같은 방식으로 worker01 ~ worker 03까지 등록을 진행해주자.\n1 2  $ docker exec -it worker01 \\ docker swarm join --token (토큰값) (메니저IP):(port)   1 2  $ docker exec -it worker02 \\ docker swarm join --token (토큰값) (메니저IP):(port)   1 2  $ docker exec -it worker03 \\ docker swarm join --token (토큰값) (메니저IP):(port)   이제 아래 명령어로 노드가 잘 등록됬는지 확인해보자\n1 2  $ docker exec -it manager \\ docker node ls   만약 worker node을 포함해 4개의 node가 나온다면 클러스터를 만드는데 성공한 것이다.\n이미지 태그 생성 1  $ docker tag (원본이미지) localhost:5000/(원본이미지)   registry 컨테이너에 이미지 등록 1  $ docker push localhost:5000/(원본이미지)   worker 컨테이너에서 이미지 다운 1 2  $ docker exec -it worker01 \\ docker pull registry:5000/(원본이미지)   이미지확인 1 2  $ docker exec -it worker01 \\ docker images   서비스 생성 swarm에서 단일 컨테이너를 배포하기 위해선 service라는 단위를 사용하는데 다음 명령어로 실행할수 있다.\n1  docker service create --name [서비스이름] -p [외부포트]:[내부포트] [도커이미지]:[태그]   이를 테스트 해보기 위해 hashcorp/http-echo이미지를 사용해보자\n1 2  docker exec -it manager \\ docker service create --name test_swarm -p 5678:5678 hashcorp/http-echo:latest   다음 명령어로 서비스가 생성된걸 확인할수 있다.\n1 2  docker exec -it manager \\ docker service ls   생성된것이 확인되었으면 다음 명령어로 스케일을 조정해보자\n1 2  docker exec -it manager \\ docker service scale test_swarm=6   잠깐기달리면 swarm이 알아서 컨테이너를 생성해 각 노드에 분활배치한다.\n그리고 service ls 명령어로 다시 확인해보면 REPLICAS가 1개에서 9개로 늘어난것을 확인할수 있다.\n생성한 서비스를 삭제하기 위해선 다음 명령어를 입력하자\n1 2  docker exec -it manager \\ docker serivce rm test_swarm   참고자료 스웜(swarm)을 이용한 도커 컨테이너 배포_1\nDocker Swarm을 이용한 쉽고 빠른 분산 서버 관리\ndocker docs\n","wordCount":"1026","inLanguage":"en","datePublished":"2021-09-09T11:12:00+09:00","dateModified":"2021-09-09T11:12:00+09:00","author":{"@type":"Person","name":"minpeter"},"mainEntityOfPage":{"@type":"WebPage","@id":"http://minpeter.github.io/posts/server/2021-09-09-docker-swarm-orchestration/"},"publisher":{"@type":"Organization","name":"minpeter DEV blog","logo":{"@type":"ImageObject","url":"http://minpeter.github.io/fav.ico"}}}</script>
</head>
<body id=top>
<script>window.matchMedia('(prefers-color-scheme: dark)').matches&&document.body.classList.add('dark')</script>
<header class=header>
<nav class=nav>
<div class=logo>
<a href=http://minpeter.github.io/ accesskey=h title="minpeter DEV blog (Alt + H)">
<img src=/icon.png alt=logo aria-label=logo height=35>minpeter DEV blog</a>
<span class=logo-switches>
</span>
</div>
<ul id=menu>
<li>
<a href=http://minpeter.github.io/archives/ title=📦Archives>
<span>📦Archives</span>
</a>
</li>
<li>
<a href=http://minpeter.github.io/categories/ title=🗃️Categories>
<span>🗃️Categories</span>
</a>
</li>
<li>
<a href=http://minpeter.github.io/search/ title="🔎Search (Alt + /)" accesskey=/>
<span>🔎Search</span>
</a>
</li>
<li>
<a href=http://minpeter.github.io/tags/ title=🏷️Tags>
<span>🏷️Tags</span>
</a>
</li>
</ul>
</nav>
</header>
<main class=main>
<article class=post-single>
<header class=post-header>
<h1 class=post-title>
🐋 Docker swarm Orchestration
</h1>
<div class=post-meta><span title="2021-09-09 11:12:00 +0900 KST">September 9, 2021</span>&nbsp;·&nbsp;5 min&nbsp;·&nbsp;minpeter&nbsp;|&nbsp;<a href=https://github.com/minpeter/minpeter.github.io/content/posts/server/2021-09-09-Docker-swarm-Orchestration.md rel="noopener noreferrer" target=_blank>📝 Suggest Changes</a>
</div>
</header>
<div class=post-content><h1 id=소개>소개<a hidden class=anchor aria-hidden=true href=#소개>#</a></h1>
<p>해당 포스트는 도커안에 도커 (dind)기능을 이용해 로컬에서 클러스터와 유사한 환경을 구성하고,<br>
docker swarm을 이용해 클러스터를 제어하는 Orchestration을 실습하는 방법에 대한 포스팅이다.</p>
<h2 id=docker-swarm-orchestration이란>docker swarm, Orchestration이란?<a hidden class=anchor aria-hidden=true href=#docker-swarm-orchestration이란>#</a></h2>
<p>docker swarm은 kubernetes와 같은 Orchestration tool이다.<br>
예를 들어 5대의 서버가 있다고 생각해보자<br>
Orchestration tool을 사용하지 않을 경우는 각각 서버에 동일한 기능을 하도록 설정하거나, 각자 특정기능을 담당하는 식으로 설정해야될 것이다.<br>
하지만 이 경우 특정 기능이나 서비스에 많은 요청이 들어올경우, 직접 수동으로 해당 서비스를 더 많이 만들어주어야 한다.<br>
하지만 Orchestration tool을 이용하면 설정값에 따라 특정 서비스를 생성하고 유지하기 때문에 부하가 많이 걸릴시 설정만 바꿔주면 되고 해당 작업 또한 자동화 할 수 있게된다.<br>
또 서비스를 업데이트 할때 서비스를 종료하지않고 배포하는 것이 가능하다.<br>
(특정 서버에 서비스를 몰아서 배치하는 것이 아닌 분산하여 배치하기 때문에 순차적으로 배포를 진행하면 중단하지 않고도 가능하다.)<br>
배포를 하였을때 해당 배포에 문제가 생긴 경우 배포를 중단하고 원래 배포전 상태로 돌려주고, 서비스에 문제가 생겨 종료된 경우 자동으로 재시작도 진행해준다.<br>
이처럼 서비스가 배포중에도 중단되지않고 꺼지지 않아야 하는 경우 사용하면 좋은 도구이다.</p>
<h2 id=docker-swarm에서-사용하는-용어-설명>docker swarm에서 사용하는 용어 설명<a hidden class=anchor aria-hidden=true href=#docker-swarm에서-사용하는-용어-설명>#</a></h2>
<table>
<thead>
<tr>
<th style=text-align:center>이름</th>
<th style=text-align:center>역활</th>
</tr>
</thead>
<tbody>
<tr>
<td style=text-align:center>compose</td>
<td style=text-align:center>여러 컨테이너로 구성된 도커 애플리케션을 관리함</td>
</tr>
<tr>
<td style=text-align:center>swarm</td>
<td style=text-align:center>클러스터 구축 및 관리</td>
</tr>
<tr>
<td style=text-align:center>service</td>
<td style=text-align:center>기본적인 배포단위, swarm에서 클러스터 안의 서비스을 관리, 기본 docker에서 run과 비슷하다</td>
</tr>
<tr>
<td style=text-align:center>stack</td>
<td style=text-align:center>swarm에서 여러 개의 서비스를 합함 전체 애플리케이션을 관리</td>
</tr>
<tr>
<td style=text-align:center>node</td>
<td style=text-align:center>swarm 클러스터에 속한 도커 서버의 단위</td>
</tr>
<tr>
<td style=text-align:center>manager node</td>
<td style=text-align:center>스윔 클러스터의 상태를 관리하는 노드, 동시에 worker node가 될 수 있고, 여기에서만 swarm명령어를 실행할수 있다.</td>
</tr>
<tr>
<td style=text-align:center>worker node</td>
<td style=text-align:center>manager node의 명령을 받아 컨테이너를 생성, 상태를 체크하는 노드</td>
</tr>
<tr>
<td style=text-align:center>task</td>
<td style=text-align:center>컨테이너 배포 단위, 서비스는 여러개의 task을 실행, task는 컨테이너를 관리한다</td>
</tr>
</tbody>
</table>
<h1 id=docker-swarm-실습>docker swarm 실습<a hidden class=anchor aria-hidden=true href=#docker-swarm-실습>#</a></h1>
<p>docker swarm은 기본적으로 여러개의 서버를 관리하는 툴이다.<br>
하지만 우리가 실습할때는 대부분 노트북 하나만을 가지고 실습을 할 것이다.<br>
따라서 실제 환경과는 조금 다른 가상 실습환경을 만들것이다.<br>
다양한 방법이 있지만 dind (docker in docker)기능을 활용해서 도커 컨테이너를 각각 노드로 사용하여 실습하도록하겠다.<br>
(다른 방법으로는 vagrant을 이용해 가상머신을 생성해주거나 클라우드서비스를 이용해 실제 클러스터를 구현할수도)<br>
docker compose을 이용해서 1개의 manager node(dind)와 3개의 worker node(dind)을 생성해줄것이다.<br>
참고한 기존 블로그 글에서는 registy컨테어너가 별도로 존재했지만 실습결과 딱히 필요성을 느끼지 못해 삭제하였다.<br>
(docker registy는 docker hub를 대체하는 로컬서버정도로 이해하면 될 것 같다.)</p>
<h2 id=가상클러스터-생성>가상클러스터 생성<a hidden class=anchor aria-hidden=true href=#가상클러스터-생성>#</a></h2>
<p>docker-swarm 디렉토리를 생성하고 그 안에 아래의 코드를 참조해 파일을 만들어주자.<br>
<strong>docker-compose.yaml</strong></p>
<div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4>
<table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0>
<pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">19
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">20
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">21
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">22
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">23
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">24
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">25
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">26
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">27
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">28
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">29
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">30
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">31
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">32
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">33
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">34
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">35
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">36
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">37
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">38
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">39
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">40
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">41
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">42
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">43
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">44
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">45
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">46
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">47
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">48
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">49
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">50
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">51
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">52
</span></code></pre></td>
<td style=vertical-align:top;padding:0;margin:0;border:0;width:100%>
<pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:#f92672>version</span>: <span style=color:#e6db74>&#34;3&#34;</span>
<span style=color:#f92672>services</span>:
    <span style=color:#f92672>manager</span>:
        <span style=color:#f92672>container_name</span>: <span style=color:#ae81ff>manager</span>
        <span style=color:#f92672>image</span>: <span style=color:#ae81ff>docker:dind</span>
        <span style=color:#f92672>privileged</span>: <span style=color:#66d9ef>true</span>
        <span style=color:#f92672>tty</span>: <span style=color:#66d9ef>true</span>
        <span style=color:#f92672>ports</span>:
            - <span style=color:#ae81ff>8000</span>:<span style=color:#ae81ff>80</span>
            - <span style=color:#ae81ff>9000</span>:<span style=color:#ae81ff>9000</span>
        <span style=color:#f92672>depends_on</span>:
            - <span style=color:#ae81ff>registry</span>
        <span style=color:#f92672>expose</span>:
            - <span style=color:#ae81ff>3375</span>
        <span style=color:#f92672>volumes</span>:
            - <span style=color:#e6db74>&#34;./stack:/stack&#34;</span>
    <span style=color:#f92672>worker01</span>:
        <span style=color:#f92672>container_name</span>: <span style=color:#ae81ff>worker01</span>
        <span style=color:#f92672>image</span>: <span style=color:#ae81ff>docker:dind</span>
        <span style=color:#f92672>privileged</span>: <span style=color:#66d9ef>true</span>
        <span style=color:#f92672>tty</span>: <span style=color:#66d9ef>true</span>
        <span style=color:#f92672>depends_on</span>:
            - <span style=color:#ae81ff>manager</span>
            - <span style=color:#ae81ff>registry</span>
        <span style=color:#f92672>expose</span>:
            - <span style=color:#ae81ff>7946</span>
            - <span style=color:#ae81ff>7946</span><span style=color:#ae81ff>/udp</span>
            - <span style=color:#ae81ff>4789</span><span style=color:#ae81ff>/udp</span>
    <span style=color:#f92672>worker02</span>:
        <span style=color:#f92672>container_name</span>: <span style=color:#ae81ff>worker02</span>
        <span style=color:#f92672>image</span>: <span style=color:#ae81ff>docker:dind</span>
        <span style=color:#f92672>privileged</span>: <span style=color:#66d9ef>true</span>
        <span style=color:#f92672>tty</span>: <span style=color:#66d9ef>true</span>
        <span style=color:#f92672>depends_on</span>:
            - <span style=color:#ae81ff>manager</span>
            - <span style=color:#ae81ff>registry</span>
        <span style=color:#f92672>expose</span>:
            - <span style=color:#ae81ff>7946</span>
            - <span style=color:#ae81ff>7946</span><span style=color:#ae81ff>/udp</span>
            - <span style=color:#ae81ff>4789</span><span style=color:#ae81ff>/udp</span>
    <span style=color:#f92672>worker03</span>:
        <span style=color:#f92672>container_name</span>: <span style=color:#ae81ff>worker03</span>
        <span style=color:#f92672>image</span>: <span style=color:#ae81ff>docker:dind</span>
        <span style=color:#f92672>privileged</span>: <span style=color:#66d9ef>true</span>
        <span style=color:#f92672>tty</span>: <span style=color:#66d9ef>true</span>
        <span style=color:#f92672>depends_on</span>:
            - <span style=color:#ae81ff>manager</span>
            - <span style=color:#ae81ff>registry</span>
        <span style=color:#f92672>expose</span>:
            - <span style=color:#ae81ff>7946</span>
            - <span style=color:#ae81ff>7946</span><span style=color:#ae81ff>/udp</span>
            - <span style=color:#ae81ff>4789</span><span style=color:#ae81ff>/udp</span>
</code></pre></td></tr></table>
</div>
</div>
<div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4>
<table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0>
<pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">19
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">20
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">21
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">22
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">23
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">24
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">25
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">26
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">27
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">28
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">29
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">30
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">31
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">32
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">33
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">34
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">35
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">36
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">37
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">38
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">39
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">40
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">41
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">42
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">43
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">44
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">45
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">46
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">47
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">48
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">49
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">50
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">51
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">52
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">53
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">54
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">55
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">56
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">57
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">58
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">59
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">60
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">61
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">62
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">63
</span></code></pre></td>
<td style=vertical-align:top;padding:0;margin:0;border:0;width:100%>
<pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:#f92672>version</span>: <span style=color:#e6db74>&#34;3&#34;</span>
<span style=color:#f92672>services</span>:
    <span style=color:#f92672>registry</span>:
        <span style=color:#f92672>container_name</span>: <span style=color:#ae81ff>registry</span>
        <span style=color:#f92672>image</span>: <span style=color:#ae81ff>registry:latest</span>
        <span style=color:#f92672>ports</span>:
            - <span style=color:#ae81ff>5000</span>:<span style=color:#ae81ff>5000</span>
        <span style=color:#f92672>volumes</span>:
            - <span style=color:#e6db74>&#34;./registry-data:/var/lib/registry&#34;</span>
    <span style=color:#f92672>manager</span>:
        <span style=color:#f92672>container_name</span>: <span style=color:#ae81ff>manager</span>
        <span style=color:#f92672>image</span>: <span style=color:#ae81ff>docker:dind</span>
        <span style=color:#f92672>privileged</span>: <span style=color:#66d9ef>true</span>
        <span style=color:#f92672>tty</span>: <span style=color:#66d9ef>true</span>
        <span style=color:#f92672>ports</span>:
            - <span style=color:#ae81ff>8000</span>:<span style=color:#ae81ff>80</span>
            - <span style=color:#ae81ff>9000</span>:<span style=color:#ae81ff>9000</span>
        <span style=color:#f92672>depends_on</span>:
            - <span style=color:#ae81ff>registry</span>
        <span style=color:#f92672>expose</span>:
            - <span style=color:#ae81ff>3375</span>
        <span style=color:#f92672>command</span>: <span style=color:#e6db74>&#34;--insecure-registry registry:5000&#34;</span>
        <span style=color:#f92672>volumes</span>:
            - <span style=color:#e6db74>&#34;./stack:/stack&#34;</span>
    <span style=color:#f92672>worker01</span>:
        <span style=color:#f92672>container_name</span>: <span style=color:#ae81ff>worker01</span>
        <span style=color:#f92672>image</span>: <span style=color:#ae81ff>docker:dind</span>
        <span style=color:#f92672>privileged</span>: <span style=color:#66d9ef>true</span>
        <span style=color:#f92672>tty</span>: <span style=color:#66d9ef>true</span>
        <span style=color:#f92672>depends_on</span>:
            - <span style=color:#ae81ff>manager</span>
            - <span style=color:#ae81ff>registry</span>
        <span style=color:#f92672>expose</span>:
            - <span style=color:#ae81ff>7946</span>
            - <span style=color:#ae81ff>7946</span><span style=color:#ae81ff>/udp</span>
            - <span style=color:#ae81ff>4789</span><span style=color:#ae81ff>/udp</span>
        <span style=color:#f92672>command</span>: <span style=color:#e6db74>&#34;--insecure-registry registry:5000&#34;</span>
    <span style=color:#f92672>worker02</span>:
        <span style=color:#f92672>container_name</span>: <span style=color:#ae81ff>worker02</span>
        <span style=color:#f92672>image</span>: <span style=color:#ae81ff>docker:dind</span>
        <span style=color:#f92672>privileged</span>: <span style=color:#66d9ef>true</span>
        <span style=color:#f92672>tty</span>: <span style=color:#66d9ef>true</span>
        <span style=color:#f92672>depends_on</span>:
            - <span style=color:#ae81ff>manager</span>
            - <span style=color:#ae81ff>registry</span>
        <span style=color:#f92672>expose</span>:
            - <span style=color:#ae81ff>7946</span>
            - <span style=color:#ae81ff>7946</span><span style=color:#ae81ff>/udp</span>
            - <span style=color:#ae81ff>4789</span><span style=color:#ae81ff>/udp</span>
        <span style=color:#f92672>command</span>: <span style=color:#e6db74>&#34;--insecure-registry registry:5000&#34;</span>
    <span style=color:#f92672>worker03</span>:
        <span style=color:#f92672>container_name</span>: <span style=color:#ae81ff>worker03</span>
        <span style=color:#f92672>image</span>: <span style=color:#ae81ff>docker:dind</span>
        <span style=color:#f92672>privileged</span>: <span style=color:#66d9ef>true</span>
        <span style=color:#f92672>tty</span>: <span style=color:#66d9ef>true</span>
        <span style=color:#f92672>depends_on</span>:
            - <span style=color:#ae81ff>manager</span>
            - <span style=color:#ae81ff>registry</span>
        <span style=color:#f92672>expose</span>:
            - <span style=color:#ae81ff>7946</span>
            - <span style=color:#ae81ff>7946</span><span style=color:#ae81ff>/udp</span>
            - <span style=color:#ae81ff>4789</span><span style=color:#ae81ff>/udp</span>
        <span style=color:#f92672>command</span>: <span style=color:#e6db74>&#34;--insecure-registry registry:5000&#34;</span>
</code></pre></td></tr></table>
</div>
</div>
<p>다음 아래의 명령어를 입력해주자</p>
<div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4>
<table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0>
<pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span></code></pre></td>
<td style=vertical-align:top;padding:0;margin:0;border:0;width:100%>
<pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback>$ docker compose up -d
$ docker ps
</code></pre></td></tr></table>
</div>
</div><p>이제 클러스터의 역활을 할 컨테이너가 4개 또는 5개가 생성된 것을 확인 할 수 있을 것이다.</p>
<h2 id=manager-등록>manager 등록<a hidden class=anchor aria-hidden=true href=#manager-등록>#</a></h2>
<p>원래 <code>docker swarm init</code> 명령어를 이용해 등록하면 되지만 현제 컨테이너 안에 가상클러스터를 실행했기 때문에 명령어 앞에 다음 명령어를 추가로 입력해주어야한다.</p>
<div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4>
<table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0>
<pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span></code></pre></td>
<td style=vertical-align:top;padding:0;margin:0;border:0;width:100%>
<pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback>$ docker exec -it (실행할 타겟, manager or worker) \
(실행할 명령어)
</code></pre></td></tr></table>
</div>
</div><p>따라서 메니저에서 docker swarm init 명령어를 실행하기 위해서는 다음 명령어를 실행하면 된다.</p>
<div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4>
<table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0>
<pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span></code></pre></td>
<td style=vertical-align:top;padding:0;margin:0;border:0;width:100%>
<pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback>$ docker exec -it manager \
docker swarm init
</code></pre></td></tr></table>
</div>
</div><p>명령어를 입력하면 아래에</p>
<div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4>
<table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0>
<pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td>
<td style=vertical-align:top;padding:0;margin:0;border:0;width:100%>
<pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback>$ docker swarm join --token (토큰값) (메니저IP):(port)
</code></pre></td></tr></table>
</div>
</div><p>형태로 출력될텐데 다음 명령어를 복사해주자.</p>
<h2 id=worker-등록>worker 등록<a hidden class=anchor aria-hidden=true href=#worker-등록>#</a></h2>
<p>위에서 복사한 명령어를 worker에서 실행하면 우리가 만든 swarm 클러스터에 등록할 수 있다.<br>
다음과 같은 방식으로 worker01 ~ worker 03까지 등록을 진행해주자.</p>
<div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4>
<table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0>
<pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span></code></pre></td>
<td style=vertical-align:top;padding:0;margin:0;border:0;width:100%>
<pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback>$ docker exec -it worker01 \
docker swarm join --token (토큰값) (메니저IP):(port)
</code></pre></td></tr></table>
</div>
</div><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4>
<table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0>
<pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span></code></pre></td>
<td style=vertical-align:top;padding:0;margin:0;border:0;width:100%>
<pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback>$ docker exec -it worker02 \
docker swarm join --token (토큰값) (메니저IP):(port)
</code></pre></td></tr></table>
</div>
</div><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4>
<table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0>
<pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span></code></pre></td>
<td style=vertical-align:top;padding:0;margin:0;border:0;width:100%>
<pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback>$ docker exec -it worker03 \
docker swarm join --token (토큰값) (메니저IP):(port)
</code></pre></td></tr></table>
</div>
</div><p>이제 아래 명령어로 노드가 잘 등록됬는지 확인해보자</p>
<div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4>
<table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0>
<pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span></code></pre></td>
<td style=vertical-align:top;padding:0;margin:0;border:0;width:100%>
<pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback>$ docker exec -it manager \
docker node ls
</code></pre></td></tr></table>
</div>
</div><p>만약 worker node을 포함해 4개의 node가 나온다면 클러스터를 만드는데 성공한 것이다.</p>
<h2 id=이미지-태그-생성>이미지 태그 생성<a hidden class=anchor aria-hidden=true href=#이미지-태그-생성>#</a></h2>
<div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4>
<table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0>
<pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td>
<td style=vertical-align:top;padding:0;margin:0;border:0;width:100%>
<pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback>$ docker tag (원본이미지) localhost:5000/(원본이미지)
</code></pre></td></tr></table>
</div>
</div><h2 id=registry-컨테이너에-이미지-등록>registry 컨테이너에 이미지 등록<a hidden class=anchor aria-hidden=true href=#registry-컨테이너에-이미지-등록>#</a></h2>
<div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4>
<table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0>
<pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td>
<td style=vertical-align:top;padding:0;margin:0;border:0;width:100%>
<pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback>$ docker push localhost:5000/(원본이미지)
</code></pre></td></tr></table>
</div>
</div><h2 id=worker-컨테이너에서-이미지-다운>worker 컨테이너에서 이미지 다운<a hidden class=anchor aria-hidden=true href=#worker-컨테이너에서-이미지-다운>#</a></h2>
<div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4>
<table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0>
<pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span></code></pre></td>
<td style=vertical-align:top;padding:0;margin:0;border:0;width:100%>
<pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback>$ docker exec -it worker01 \
docker pull registry:5000/(원본이미지)
</code></pre></td></tr></table>
</div>
</div><h2 id=이미지확인>이미지확인<a hidden class=anchor aria-hidden=true href=#이미지확인>#</a></h2>
<div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4>
<table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0>
<pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span></code></pre></td>
<td style=vertical-align:top;padding:0;margin:0;border:0;width:100%>
<pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback>$ docker exec -it worker01 \
docker images
</code></pre></td></tr></table>
</div>
</div>
<h2 id=서비스-생성>서비스 생성<a hidden class=anchor aria-hidden=true href=#서비스-생성>#</a></h2>
<p>swarm에서 단일 컨테이너를 배포하기 위해선 service라는 단위를 사용하는데 다음 명령어로 실행할수 있다.</p>
<div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4>
<table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0>
<pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td>
<td style=vertical-align:top;padding:0;margin:0;border:0;width:100%>
<pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback>docker service create --name [서비스이름] -p [외부포트]:[내부포트] [도커이미지]:[태그]
</code></pre></td></tr></table>
</div>
</div><p>이를 테스트 해보기 위해 <a href=https://hub.docker.com/r/hashicorp/http-echo/>hashcorp/http-echo</a>이미지를 사용해보자</p>
<div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4>
<table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0>
<pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span></code></pre></td>
<td style=vertical-align:top;padding:0;margin:0;border:0;width:100%>
<pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback>docker exec -it manager \
docker service create --name test_swarm -p 5678:5678 hashcorp/http-echo:latest
</code></pre></td></tr></table>
</div>
</div><p>다음 명령어로 서비스가 생성된걸 확인할수 있다.</p>
<div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4>
<table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0>
<pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span></code></pre></td>
<td style=vertical-align:top;padding:0;margin:0;border:0;width:100%>
<pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback>docker exec -it manager \
docker service ls
</code></pre></td></tr></table>
</div>
</div><p>생성된것이 확인되었으면 다음 명령어로 스케일을 조정해보자</p>
<div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4>
<table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0>
<pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span></code></pre></td>
<td style=vertical-align:top;padding:0;margin:0;border:0;width:100%>
<pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback>docker exec -it manager \
docker service scale test_swarm=6
</code></pre></td></tr></table>
</div>
</div><p>잠깐기달리면 swarm이 알아서 컨테이너를 생성해 각 노드에 분활배치한다.<br>
그리고 service ls 명령어로 다시 확인해보면 REPLICAS가 1개에서 9개로 늘어난것을 확인할수 있다.</p>
<p>생성한 서비스를 삭제하기 위해선 다음 명령어를 입력하자</p>
<div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4>
<table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0>
<pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span></code></pre></td>
<td style=vertical-align:top;padding:0;margin:0;border:0;width:100%>
<pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback>docker exec -it manager \
docker serivce rm test_swarm
</code></pre></td></tr></table>
</div>
</div><h2 id=참고자료>참고자료<a hidden class=anchor aria-hidden=true href=#참고자료>#</a></h2>
<p><a href="https://cornswrold.tistory.com/512?category=930033">스웜(swarm)을 이용한 도커 컨테이너 배포_1</a><br>
<a href=https://subicura.com/2017/02/25/container-orchestration-with-docker-swarm.html>Docker Swarm을 이용한 쉽고 빠른 분산 서버 관리</a><br>
<a href=https://docs.docker.com/engine/swarm>docker docs</a></p>
</div>
<footer class=post-footer>
<ul class=post-tags>
<li><a href=http://minpeter.github.io/tags/docker/>docker</a></li>
<li><a href=http://minpeter.github.io/tags/docker-swarm/>docker-swarm</a></li>
<li><a href=http://minpeter.github.io/tags/server/>server</a></li>
</ul>
<nav class=paginav>
<a class=prev href=http://minpeter.github.io/posts/til/2021-09-12-onedrive%EC%99%80-pihole/>
<span class=title>« Prev Page</span>
<br>
<span>☁️ onedrive와 pihole (TIL)</span>
</a>
<a class=next href=http://minpeter.github.io/posts/til/2021-09-05-edge%EC%9D%98-%EB%8F%85%EC%9E%AC%EC%97%90%EC%84%9C-%EB%B2%97%EC%96%B4%EB%82%98%EA%B8%B0/>
<span class=title>Next Page »</span>
<br>
<span>🎉 edge의 독재에서 벗어나기 (TIL)</span>
</a>
</nav>
<div class=share-buttons>
<a target=_blank rel="noopener noreferrer" aria-label="share 🐋 Docker swarm Orchestration on twitter" href="https://twitter.com/intent/tweet/?text=%f0%9f%90%8b%20Docker%20swarm%20Orchestration&url=http%3a%2f%2fminpeter.github.io%2fposts%2fserver%2f2021-09-09-docker-swarm-orchestration%2f&hashtags=docker%2cdocker-swarm%2cserver"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM195.519 424.544c135.939.0 210.268-112.643 210.268-210.268.0-3.218.0-6.437-.153-9.502 14.406-10.421 26.973-23.448 36.935-38.314-13.18 5.824-27.433 9.809-42.452 11.648 15.326-9.196 26.973-23.602 32.49-40.92-14.252 8.429-30.038 14.56-46.896 17.931-13.487-14.406-32.644-23.295-53.946-23.295-40.767.0-73.87 33.104-73.87 73.87.0 5.824.613 11.494 1.992 16.858-61.456-3.065-115.862-32.49-152.337-77.241-6.284 10.881-9.962 23.601-9.962 37.088.0 25.594 13.027 48.276 32.95 61.456-12.107-.307-23.448-3.678-33.41-9.196v.92c0 35.862 25.441 65.594 59.311 72.49-6.13 1.686-12.72 2.606-19.464 2.606-4.751.0-9.348-.46-13.946-1.38 9.349 29.426 36.628 50.728 68.965 51.341-25.287 19.771-57.164 31.571-91.8 31.571-5.977.0-11.801-.306-17.625-1.073 32.337 21.15 71.264 33.41 112.95 33.41z"/></svg>
</a>
<a target=_blank rel="noopener noreferrer" aria-label="share 🐋 Docker swarm Orchestration on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&url=http%3a%2f%2fminpeter.github.io%2fposts%2fserver%2f2021-09-09-docker-swarm-orchestration%2f&title=%f0%9f%90%8b%20Docker%20swarm%20Orchestration&summary=%f0%9f%90%8b%20Docker%20swarm%20Orchestration&source=http%3a%2f%2fminpeter.github.io%2fposts%2fserver%2f2021-09-09-docker-swarm-orchestration%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg>
</a>
<a target=_blank rel="noopener noreferrer" aria-label="share 🐋 Docker swarm Orchestration on reddit" href="https://reddit.com/submit?url=http%3a%2f%2fminpeter.github.io%2fposts%2fserver%2f2021-09-09-docker-swarm-orchestration%2f&title=%f0%9f%90%8b%20Docker%20swarm%20Orchestration"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg>
</a>
<a target=_blank rel="noopener noreferrer" aria-label="share 🐋 Docker swarm Orchestration on facebook" href="https://facebook.com/sharer/sharer.php?u=http%3a%2f%2fminpeter.github.io%2fposts%2fserver%2f2021-09-09-docker-swarm-orchestration%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg>
</a>
<a target=_blank rel="noopener noreferrer" aria-label="share 🐋 Docker swarm Orchestration on whatsapp" href="https://api.whatsapp.com/send?text=%f0%9f%90%8b%20Docker%20swarm%20Orchestration%20-%20http%3a%2f%2fminpeter.github.io%2fposts%2fserver%2f2021-09-09-docker-swarm-orchestration%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg>
</a>
<a target=_blank rel="noopener noreferrer" aria-label="share 🐋 Docker swarm Orchestration on telegram" href="https://telegram.me/share/url?text=%f0%9f%90%8b%20Docker%20swarm%20Orchestration&url=http%3a%2f%2fminpeter.github.io%2fposts%2fserver%2f2021-09-09-docker-swarm-orchestration%2f"><svg viewBox="2 2 28 28"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg>
</a>
</div>
</footer><script src=https://utteranc.es/client.js repo=minpeter/blog-comments issue-term=title theme=photon-dark crossorigin=anonymous async></script>
</article>
</main>
<footer class=footer>
<span>&copy; 2022 <a href=http://minpeter.github.io/>minpeter DEV blog</a></span>
<span>
Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a>
</span>
</footer>
<a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a>
<script>let menu=document.getElementById('menu');menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(a=>{a.addEventListener("click",function(b){b.preventDefault();var a=this.getAttribute("href").substr(1);window.matchMedia('(prefers-reduced-motion: reduce)').matches?document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView({behavior:"smooth"}),a==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${a}`)})})</script>
<script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script>
<script>document.querySelectorAll('pre > code').forEach(b=>{const c=b.parentNode.parentNode,a=document.createElement('button');a.classList.add('copy-code'),a.innerText='copy';function d(){a.innerText='copied!',setTimeout(()=>{a.innerText='copy'},2e3)}a.addEventListener('click',e=>{if('clipboard'in navigator){navigator.clipboard.writeText(b.textContent),d();return}const a=document.createRange();a.selectNodeContents(b);const c=window.getSelection();c.removeAllRanges(),c.addRange(a);try{document.execCommand('copy'),d()}catch(a){}c.removeRange(a)}),c.classList.contains("highlight")?c.appendChild(a):c.parentNode.firstChild==c||(b.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?b.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(a):b.parentNode.appendChild(a))})</script>
</body>
</html>