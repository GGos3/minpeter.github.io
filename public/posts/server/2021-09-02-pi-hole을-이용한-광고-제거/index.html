<!doctype html><html lang=en dir=auto>
<head><meta charset=utf-8>
<meta http-equiv=x-ua-compatible content="IE=edge">
<meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no">
<meta name=robots content="index, follow">
<title>📡 pi hole을 이용한 광고 제거 | minpeter DEV blog</title>
<meta name=keywords content="raspberrypi,pihole,homelab,dns,server">
<meta name=description content="pi hole이란? 라즈베리파이와 리눅스계열 운영체제에 설치되는 DNS서버이다.
하지만 광고 제거을 곁들인
일반적으로 사용하는 크롬 플러그인과 다르게 네트워크단에서 광고를 차단하기 때문에 성능저하가 덜하다.
또한 플러그인에 비해 비교 불가능한 장점이 있는데, 공유기에 DNS서버를 pihole로 설정하면 해당 네트워크 전체에 적용된다.
그러니까 스마트폰에서도 된단 소리다
이러한 장점이 있으나 무조건 해야겠지?
설치과정 설치하는 방법은 크게 2가지로 나뉜다.
  설치스크립트를 이용하는 방법
curl -sSL https://install.pi-hole.net | bash
입력한 뒤에 선택창같은게 뜰꺼다.
눈칫것 설정해주자.
곧 pi hole이 실행될 것이다.">
<meta name=author content="minpeter">
<link rel=canonical href=http://minpeter.github.io/posts/server/2021-09-02-pi-hole%EC%9D%84-%EC%9D%B4%EC%9A%A9%ED%95%9C-%EA%B4%91%EA%B3%A0-%EC%A0%9C%EA%B1%B0/>
<meta name=google-site-verification content="RNVL00kQq_OXnyYh9S4hgL35tPhS5wdFNf_qNiXhxS8">
<link crossorigin=anonymous href=/assets/css/stylesheet.min.c88963fe2d79462000fd0fb1b3737783c32855d340583e4523343f8735c787f0.css integrity="sha256-yIlj/i15RiAA/Q+xs3N3g8MoVdNAWD5FIzQ/hzXHh/A=" rel="preload stylesheet" as=style>
<link rel=preload href=/icon.png as=image>
<script defer crossorigin=anonymous src=/assets/js/highlight.min.7680afc38aa6b15ddf158a4f3780b7b1f7dde7e91d26f073e6229bb7a0793c92.js integrity="sha256-doCvw4qmsV3fFYpPN4C3sffd5+kdJvBz5iKbt6B5PJI=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=http://minpeter.github.io/fav.ico>
<link rel=icon type=image/png sizes=16x16 href=http://minpeter.github.io/%3Clink%20/%20abs%20url%3E>
<link rel=icon type=image/png sizes=32x32 href=http://minpeter.github.io/fav.png>
<link rel=apple-touch-icon href=http://minpeter.github.io/%3Clink%20/%20abs%20url%3E>
<link rel=mask-icon href=http://minpeter.github.io/%3Clink%20/%20abs%20url%3E>
<meta name=theme-color content="#2e2e33">
<meta name=msapplication-TileColor content="#2e2e33">
<meta name=generator content="Hugo 0.91.2">
<noscript>
<style>#theme-toggle,.top-link{display:none}</style>
<style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style>
</noscript>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6FQKWLZK1S"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag('js',new Date),gtag('config','G-6FQKWLZK1S',{anonymize_ip:!1})}</script>
<meta property="og:title" content="📡 pi hole을 이용한 광고 제거">
<meta property="og:description" content="pi hole이란? 라즈베리파이와 리눅스계열 운영체제에 설치되는 DNS서버이다.
하지만 광고 제거을 곁들인
일반적으로 사용하는 크롬 플러그인과 다르게 네트워크단에서 광고를 차단하기 때문에 성능저하가 덜하다.
또한 플러그인에 비해 비교 불가능한 장점이 있는데, 공유기에 DNS서버를 pihole로 설정하면 해당 네트워크 전체에 적용된다.
그러니까 스마트폰에서도 된단 소리다
이러한 장점이 있으나 무조건 해야겠지?
설치과정 설치하는 방법은 크게 2가지로 나뉜다.
  설치스크립트를 이용하는 방법
curl -sSL https://install.pi-hole.net | bash
입력한 뒤에 선택창같은게 뜰꺼다.
눈칫것 설정해주자.
곧 pi hole이 실행될 것이다.">
<meta property="og:type" content="article">
<meta property="og:url" content="http://minpeter.github.io/posts/server/2021-09-02-pi-hole%EC%9D%84-%EC%9D%B4%EC%9A%A9%ED%95%9C-%EA%B4%91%EA%B3%A0-%EC%A0%9C%EA%B1%B0/"><meta property="og:image" content="http://minpeter.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta property="article:section" content="posts">
<meta property="article:published_time" content="2021-09-02T12:59:59+09:00">
<meta property="article:modified_time" content="2021-09-02T12:59:59+09:00"><meta property="og:site_name" content="minpeter DEV blog">
<meta name=twitter:card content="summary_large_image">
<meta name=twitter:image content="http://minpeter.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E">
<meta name=twitter:title content="📡 pi hole을 이용한 광고 제거">
<meta name=twitter:description content="pi hole이란? 라즈베리파이와 리눅스계열 운영체제에 설치되는 DNS서버이다.
하지만 광고 제거을 곁들인
일반적으로 사용하는 크롬 플러그인과 다르게 네트워크단에서 광고를 차단하기 때문에 성능저하가 덜하다.
또한 플러그인에 비해 비교 불가능한 장점이 있는데, 공유기에 DNS서버를 pihole로 설정하면 해당 네트워크 전체에 적용된다.
그러니까 스마트폰에서도 된단 소리다
이러한 장점이 있으나 무조건 해야겠지?
설치과정 설치하는 방법은 크게 2가지로 나뉜다.
  설치스크립트를 이용하는 방법
curl -sSL https://install.pi-hole.net | bash
입력한 뒤에 선택창같은게 뜰꺼다.
눈칫것 설정해주자.
곧 pi hole이 실행될 것이다.">
<script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"http://minpeter.github.io/posts/"},{"@type":"ListItem","position":2,"name":"📡 pi hole을 이용한 광고 제거","item":"http://minpeter.github.io/posts/server/2021-09-02-pi-hole%EC%9D%84-%EC%9D%B4%EC%9A%A9%ED%95%9C-%EA%B4%91%EA%B3%A0-%EC%A0%9C%EA%B1%B0/"}]}</script>
<script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"📡 pi hole을 이용한 광고 제거","name":"📡 pi hole을 이용한 광고 제거","description":"pi hole이란? 라즈베리파이와 리눅스계열 운영체제에 설치되는 DNS서버이다.\n하지만 광고 제거을 곁들인\n일반적으로 사용하는 크롬 플러그인과 다르게 네트워크단에서 광고를 차단하기 때문에 성능저하가 덜하다.\n또한 플러그인에 비해 비교 불가능한 장점이 있는데, 공유기에 DNS서버를 pihole로 설정하면 해당 네트워크 전체에 적용된다.\n그러니까 스마트폰에서도 된단 소리다\n이러한 장점이 있으나 무조건 해야겠지?\n설치과정 설치하는 방법은 크게 2가지로 나뉜다.\n  설치스크립트를 이용하는 방법\ncurl -sSL https://install.pi-hole.net | bash\n입력한 뒤에 선택창같은게 뜰꺼다.\n눈칫것 설정해주자.\n곧 pi hole이 실행될 것이다.","keywords":["raspberrypi","pihole","homelab","dns","server"],"articleBody":"pi hole이란? 라즈베리파이와 리눅스계열 운영체제에 설치되는 DNS서버이다.\n하지만 광고 제거을 곁들인\n일반적으로 사용하는 크롬 플러그인과 다르게 네트워크단에서 광고를 차단하기 때문에 성능저하가 덜하다.\n또한 플러그인에 비해 비교 불가능한 장점이 있는데, 공유기에 DNS서버를 pihole로 설정하면 해당 네트워크 전체에 적용된다.\n그러니까 스마트폰에서도 된단 소리다\n이러한 장점이 있으나 무조건 해야겠지?\n설치과정 설치하는 방법은 크게 2가지로 나뉜다.\n  설치스크립트를 이용하는 방법\ncurl -sSL https://install.pi-hole.net | bash\n입력한 뒤에 선택창같은게 뜰꺼다.\n눈칫것 설정해주자.\n곧 pi hole이 실행될 것이다.\n라즈베리파이제로같은저성능 머신에선 이 방법을 쓰겠지만 난 3b+ 에서 설정할 것이기에 후자를 선호한다.\n  도커를 이용해 컨테이너로 띄우는 방법\n이 방법을 추천한다.\n3b+같은 모델의 경우 파이홀을 구동하고도 램 같은 리소스가 한참 남는다.\n1번 방법을 사용해도 남은 리소스를 사용할 수 있지만 도커 컨테이너를 사용하면 뭔가 깔끔하게 관리가 가능하기 때문에 사용한다.\n일단 docker와 docker-compose을 설치한 뒤,\npihole 디렉토리를 하나 만들어준다.\n해당 디렉토리에서 docker-compose 파일에 아래와 같이 작성한다.\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26  version: \"3\"# More info at https://github.com/pi-hole/docker-pi-hole/ and https://docs.pi-hole.net/services:pihole: container_name: pihole image: pihole/pihole:latest ports: - \"53:53/tcp\" - \"53:53/udp\" - \"67:67/udp\" - \"80:80/tcp\" - \"443:443/tcp\" environment: TZ: 'Asia/Seoul' WEBPASSWORD: '' # Volumes store your data between container upgrades volumes: - './etc-pihole/:/etc/pihole/' - './etc-dnsmasq.d/:/etc/dnsmasq.d/' dns: - 127.0.0.1 - 1.1.1.1 - 1.0.0.1 # Recommended but not required (DHCP needs NET_ADMIN) # https://github.com/pi-hole/docker-pi-hole#note-on-capabilities cap_add:  위에 파일에서 수정해야될것은 딱 한가지인데 WEBPASSWORD의 을 대신해서 비밀번호를 입력해주면된다.\n(이때입력한 비밀번호는 관리자페이지 로그인에 사용)\ndocker-compose up -d\n을 실행해주면 조금 뒤에 pi hole이 실행된다.\n  pi hole 설정 이제 pi hole 설치는 끝났다. 🎉 광고 제거를 위해서는 몇가지 설정이 필요한데, 먼저 관리자페이지로 가보자\n관리자 페이지는 해당라파ip/admin으로 접속하면 열린다.\n잘 열린다면 pi hole 설치가 정상적으로 된 것이다.\n뒤에 설명은 공유기를 사용하고 있다는 가정하에 설명하겠다\n열리는 것을 확인한 후 공유기 설정페이지로 가준다.\n설정페이지에는 보통 인터넷설정하는 페이지가 있을텐데 여기서 DNS 항목을 수정해야된다.\n기본 DNS 주소와 보조 DNS 주소를 입력하는 공간이 있을텐데 여기서 기본 DNS 주소에 라즈베리파이 IP를 입력해준다.\n제발 보조 DNS에 아무것도 입력하지 말자\n필자는 인터넷에 올라온 설명 따라하다가 “이거 왜 안돼.. 이러면서 한참 삽질했다..\n보조 DNS를 1.1.1.1, 8.8.8.8 같은 DNS 주소로 입력할 경우 우리가 열심히 구축해둔 PI hole의 광고 제거 기능으로 광고 이미지 아이피를 차단하면 공유기가 자동으로 보조 DNS에서 도메인을 검색해버린다..\n따라서 절대로 보조 DNS는 비워두자\npi hole 작동 테스트 여기까지 문제 없이 따라왔다면 이제 광고차단이 이루워지고 있을 것이다.\n근데 전부 차단되는건 아니고 PI hole 광고 차단리스트에 등록된 광고만 삭제되는데\n이는 추가로 등록할수 있으니 넘어가고\n광고가 잘 차단되는지 바로 알 수가 없다.\n따라서 테스트 하는 방법을 소개한다.\n바로 speedtest.net!!\n이건 인터넷속도측정사이튼데 PI hole이 작용 안되면 광고가 엄~청 많다.\n하지만 PI hole이 잘 작동된다면 해당 사이트에 광고가 하나도 안보여야한다.\n만약 광고가 보인다면 아래 2가지를 따라해보자.\n 제발 보조 DNS 확인좀;; 컴퓨터 재부팅후 재시도 (PIhole돌아가고 있는 라즈베리파이말고)  여기까지가 내가 PI hole 설정하면서 알게된 내용이다.\n내일은 openVPN을 연동하여 집이 아닌 외부에서도 광고차단 효과를 누릴수 있게 설정해보도록 하겠다.\n참고자료 pi hole home page\npi hole로 광고 뿌리뽑기\npihole_test_site\n","wordCount":"470","inLanguage":"en","datePublished":"2021-09-02T12:59:59+09:00","dateModified":"2021-09-02T12:59:59+09:00","author":{"@type":"Person","name":"minpeter"},"mainEntityOfPage":{"@type":"WebPage","@id":"http://minpeter.github.io/posts/server/2021-09-02-pi-hole%EC%9D%84-%EC%9D%B4%EC%9A%A9%ED%95%9C-%EA%B4%91%EA%B3%A0-%EC%A0%9C%EA%B1%B0/"},"publisher":{"@type":"Organization","name":"minpeter DEV blog","logo":{"@type":"ImageObject","url":"http://minpeter.github.io/fav.ico"}}}</script>
</head>
<body id=top>
<script>window.matchMedia('(prefers-color-scheme: dark)').matches&&document.body.classList.add('dark')</script>
<header class=header>
<nav class=nav>
<div class=logo>
<a href=http://minpeter.github.io/ accesskey=h title="minpeter DEV blog (Alt + H)">
<img src=/icon.png alt=logo aria-label=logo height=35>minpeter DEV blog</a>
<span class=logo-switches>
</span>
</div>
<ul id=menu>
<li>
<a href=http://minpeter.github.io/archives/ title=📦Archives>
<span>📦Archives</span>
</a>
</li>
<li>
<a href=http://minpeter.github.io/categories/ title=🗃️Categories>
<span>🗃️Categories</span>
</a>
</li>
<li>
<a href=http://minpeter.github.io/search/ title="🔎Search (Alt + /)" accesskey=/>
<span>🔎Search</span>
</a>
</li>
<li>
<a href=http://minpeter.github.io/tags/ title=🏷️Tags>
<span>🏷️Tags</span>
</a>
</li>
</ul>
</nav>
</header>
<main class=main>
<article class=post-single>
<header class=post-header>
<h1 class=post-title>
📡 pi hole을 이용한 광고 제거
</h1>
<div class=post-meta><span title="2021-09-02 12:59:59 +0900 KST">September 2, 2021</span>&nbsp;·&nbsp;3 min&nbsp;·&nbsp;minpeter&nbsp;|&nbsp;<a href=https://github.com/minpeter/minpeter.github.io/content/posts/server/2021-09-02-pi-hole%ec%9d%84-%ec%9d%b4%ec%9a%a9%ed%95%9c-%ea%b4%91%ea%b3%a0-%ec%a0%9c%ea%b1%b0.md rel="noopener noreferrer" target=_blank>📝 Suggest Changes</a>
</div>
</header>
<div class=post-content><h2 id=pi-hole이란>pi hole이란?<a hidden class=anchor aria-hidden=true href=#pi-hole이란>#</a></h2>
<p>라즈베리파이와 리눅스계열 운영체제에 설치되는 DNS서버이다.<br>
하지만 <strong>광고 제거</strong>을 곁들인</p>
<p>일반적으로 사용하는 크롬 플러그인과 다르게 네트워크단에서 광고를 차단하기 때문에 성능저하가 덜하다.<br>
또한 플러그인에 비해 비교 불가능한 장점이 있는데, 공유기에 DNS서버를 pihole로 설정하면 해당 네트워크 전체에 적용된다.</p>
<p><strong>그러니까 스마트폰에서도 된단 소리다</strong></p>
<p>이러한 장점이 있으나 무조건 해야겠지?</p>
<h2 id=설치과정>설치과정<a hidden class=anchor aria-hidden=true href=#설치과정>#</a></h2>
<p>설치하는 방법은 크게 2가지로 나뉜다.</p>
<ol>
<li>
<p>설치스크립트를 이용하는 방법</p>
<p><code>curl -sSL https://install.pi-hole.net | bash</code><br>
입력한 뒤에 선택창같은게 뜰꺼다.<br>
눈칫것 설정해주자.<br>
곧 pi hole이 실행될 것이다.<br>
<del>라즈베리파이제로같은</del>저성능 머신에선 이 방법을 쓰겠지만 난 3b+ 에서 설정할 것이기에 후자를 선호한다.</p>
</li>
<li>
<p>도커를 이용해 컨테이너로 띄우는 방법</p>
<p>이 방법을 추천한다.<br>
3b+같은 모델의 경우 파이홀을 구동하고도 램 같은 리소스가 한참 남는다.<br>
1번 방법을 사용해도 남은 리소스를 사용할 수 있지만 도커 컨테이너를 사용하면 뭔가 깔끔하게 관리가 가능하기 때문에 사용한다.<br>
일단 docker와 docker-compose을 설치한 뒤,<br>
pihole 디렉토리를 하나 만들어준다.<br>
해당 디렉토리에서 docker-compose 파일에 아래와 같이 작성한다.</p>
<div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4>
<table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0>
<pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">19
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">20
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">21
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">22
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">23
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">24
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">25
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">26
</span></code></pre></td>
<td style=vertical-align:top;padding:0;margin:0;border:0;width:100%>
<pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-docker data-lang=docker>version: <span style=color:#e6db74>&#34;3&#34;</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#75715e># More info at https://github.com/pi-hole/docker-pi-hole/ and https://docs.pi-hole.net/</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>services:<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>pihole:<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>    container_name: pihole<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>    image: pihole/pihole:latest<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>    ports:<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>    - <span style=color:#e6db74>&#34;53:53/tcp&#34;</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>    - <span style=color:#e6db74>&#34;53:53/udp&#34;</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>    - <span style=color:#e6db74>&#34;67:67/udp&#34;</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>    - <span style=color:#e6db74>&#34;80:80/tcp&#34;</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>    - <span style=color:#e6db74>&#34;443:443/tcp&#34;</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>    environment:<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>    TZ: <span style=color:#e6db74>&#39;Asia/Seoul&#39;</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>    WEBPASSWORD: <span style=color:#e6db74>&#39;&lt;MY_PASSWORD&gt;&#39;</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>    <span style=color:#75715e># Volumes store your data between container upgrades</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>    volumes:<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>    - <span style=color:#e6db74>&#39;./etc-pihole/:/etc/pihole/&#39;</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>    - <span style=color:#e6db74>&#39;./etc-dnsmasq.d/:/etc/dnsmasq.d/&#39;</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>    dns:<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>    - 127.0.0.1<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>    - 1.1.1.1<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>    - 1.0.0.1<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>    <span style=color:#75715e># Recommended but not required (DHCP needs NET_ADMIN)</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>    <span style=color:#75715e>#   https://github.com/pi-hole/docker-pi-hole#note-on-capabilities</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>    cap_add:<span style=color:#960050;background-color:#1e0010>
</span></code></pre></td></tr></table>
</div>
</div><p>위에 파일에서 수정해야될것은 딱 한가지인데 WEBPASSWORD의 &lt;MY_PASSWORD>을 대신해서 비밀번호를 입력해주면된다.<br>
(이때입력한 비밀번호는 관리자페이지 로그인에 사용)</p>
<p><code>docker-compose up -d</code><br>
을 실행해주면 조금 뒤에 pi hole이 실행된다.</p>
</li>
</ol>
<h2 id=pi-hole-설정>pi hole 설정<a hidden class=anchor aria-hidden=true href=#pi-hole-설정>#</a></h2>
<p>이제 pi hole 설치는 끝났다. 🎉
광고 제거를 위해서는 몇가지 설정이 필요한데, 먼저 관리자페이지로 가보자<br>
관리자 페이지는 <code>해당라파ip/admin</code>으로 접속하면 열린다.<br>
잘 열린다면 pi hole 설치가 정상적으로 된 것이다.<br>
<del>뒤에 설명은 공유기를 사용하고 있다는 가정하에 설명하겠다</del><br>
열리는 것을 확인한 후 공유기 설정페이지로 가준다.<br>
설정페이지에는 보통 인터넷설정하는 페이지가 있을텐데 여기서 <code>DNS</code> 항목을 수정해야된다.<br>
기본 DNS 주소와 보조 DNS 주소를 입력하는 공간이 있을텐데 여기서 기본 DNS 주소에 라즈베리파이 IP를 입력해준다.<br>
<strong>제발 보조 DNS에 아무것도 입력하지 말자</strong><br>
필자는 인터넷에 올라온 설명 따라하다가 &ldquo;이거 왜 안돼.. 이러면서 한참 삽질했다..<br>
보조 DNS를 1.1.1.1, 8.8.8.8 같은 DNS 주소로 입력할 경우 우리가 열심히 구축해둔 PI hole의 광고 제거 기능으로 광고 이미지 아이피를 차단하면 공유기가 자동으로 보조 DNS에서 도메인을 검색해버린다..<br>
<strong>따라서 절대로 보조 DNS는 비워두자</strong></p>
<h2 id=pi-hole-작동-테스트>pi hole 작동 테스트<a hidden class=anchor aria-hidden=true href=#pi-hole-작동-테스트>#</a></h2>
<p>여기까지 문제 없이 따라왔다면 이제 광고차단이 이루워지고 있을 것이다.<br>
근데 전부 차단되는건 아니고 PI hole 광고 차단리스트에 등록된 광고만 삭제되는데<br>
<del>이는 추가로 등록할수 있으니 넘어가고</del><br>
광고가 잘 차단되는지 바로 알 수가 없다.</p>
<p>따라서 테스트 하는 방법을 소개한다.<br>
바로 <a href=https://www.speedtest.net/>speedtest.net</a>!!<br>
이건 인터넷속도측정사이튼데 PI hole이 작용 안되면 광고가 엄~청 많다.<br>
하지만 PI hole이 잘 작동된다면 해당 사이트에 광고가 하나도 안보여야한다.<br>
만약 광고가 보인다면 아래 2가지를 따라해보자.</p>
<ol>
<li>제발 보조 DNS 확인좀;;</li>
<li>컴퓨터 재부팅후 재시도 (PIhole돌아가고 있는 라즈베리파이말고)</li>
</ol>
<p>여기까지가 내가 PI hole 설정하면서 알게된 내용이다.<br>
내일은 openVPN을 연동하여 집이 아닌 외부에서도 광고차단 효과를 누릴수 있게 설정해보도록 하겠다.</p>
<h2 id=참고자료>참고자료<a hidden class=anchor aria-hidden=true href=#참고자료>#</a></h2>
<p><a href=https://pi-hole.net/>pi hole home page</a><br>
<a href=https://kycfeel.github.io/2019/10/06/Pi-Hole%EB%A1%9C-%EA%B4%91%EA%B3%A0-%EB%BF%8C%EB%A6%AC%EB%BD%91%EA%B8%B0/>pi hole로 광고 뿌리뽑기</a><br>
<a href=https://www.reddit.com/r/pihole/comments/m1xran/pihole_test_site/>pihole_test_site</a></p>
</div>
<footer class=post-footer>
<ul class=post-tags>
<li><a href=http://minpeter.github.io/tags/raspberrypi/>raspberrypi</a></li>
<li><a href=http://minpeter.github.io/tags/pihole/>pihole</a></li>
<li><a href=http://minpeter.github.io/tags/homelab/>homelab</a></li>
<li><a href=http://minpeter.github.io/tags/dns/>dns</a></li>
<li><a href=http://minpeter.github.io/tags/server/>server</a></li>
</ul>
<nav class=paginav>
<a class=prev href=http://minpeter.github.io/posts/til/2021-09-05-edge%EC%9D%98-%EB%8F%85%EC%9E%AC%EC%97%90%EC%84%9C-%EB%B2%97%EC%96%B4%EB%82%98%EA%B8%B0/>
<span class=title>« Prev Page</span>
<br>
<span>🎉 edge의 독재에서 벗어나기 (TIL)</span>
</a>
<a class=next href=http://minpeter.github.io/posts/til/2021-08-30-%EB%85%B8%ED%8A%B8%EB%B6%81-%EA%B3%A0%EC%9E%A5/>
<span class=title>Next Page »</span>
<br>
<span>😂 노트북 고장 (TIL)</span>
</a>
</nav>
<div class=share-buttons>
<a target=_blank rel="noopener noreferrer" aria-label="share 📡 pi hole을 이용한 광고 제거 on twitter" href="https://twitter.com/intent/tweet/?text=%f0%9f%93%a1%20pi%20hole%ec%9d%84%20%ec%9d%b4%ec%9a%a9%ed%95%9c%20%ea%b4%91%ea%b3%a0%20%ec%a0%9c%ea%b1%b0&url=http%3a%2f%2fminpeter.github.io%2fposts%2fserver%2f2021-09-02-pi-hole%25EC%259D%2584-%25EC%259D%25B4%25EC%259A%25A9%25ED%2595%259C-%25EA%25B4%2591%25EA%25B3%25A0-%25EC%25A0%259C%25EA%25B1%25B0%2f&hashtags=raspberrypi%2cpihole%2chomelab%2cdns%2cserver"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM195.519 424.544c135.939.0 210.268-112.643 210.268-210.268.0-3.218.0-6.437-.153-9.502 14.406-10.421 26.973-23.448 36.935-38.314-13.18 5.824-27.433 9.809-42.452 11.648 15.326-9.196 26.973-23.602 32.49-40.92-14.252 8.429-30.038 14.56-46.896 17.931-13.487-14.406-32.644-23.295-53.946-23.295-40.767.0-73.87 33.104-73.87 73.87.0 5.824.613 11.494 1.992 16.858-61.456-3.065-115.862-32.49-152.337-77.241-6.284 10.881-9.962 23.601-9.962 37.088.0 25.594 13.027 48.276 32.95 61.456-12.107-.307-23.448-3.678-33.41-9.196v.92c0 35.862 25.441 65.594 59.311 72.49-6.13 1.686-12.72 2.606-19.464 2.606-4.751.0-9.348-.46-13.946-1.38 9.349 29.426 36.628 50.728 68.965 51.341-25.287 19.771-57.164 31.571-91.8 31.571-5.977.0-11.801-.306-17.625-1.073 32.337 21.15 71.264 33.41 112.95 33.41z"/></svg>
</a>
<a target=_blank rel="noopener noreferrer" aria-label="share 📡 pi hole을 이용한 광고 제거 on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&url=http%3a%2f%2fminpeter.github.io%2fposts%2fserver%2f2021-09-02-pi-hole%25EC%259D%2584-%25EC%259D%25B4%25EC%259A%25A9%25ED%2595%259C-%25EA%25B4%2591%25EA%25B3%25A0-%25EC%25A0%259C%25EA%25B1%25B0%2f&title=%f0%9f%93%a1%20pi%20hole%ec%9d%84%20%ec%9d%b4%ec%9a%a9%ed%95%9c%20%ea%b4%91%ea%b3%a0%20%ec%a0%9c%ea%b1%b0&summary=%f0%9f%93%a1%20pi%20hole%ec%9d%84%20%ec%9d%b4%ec%9a%a9%ed%95%9c%20%ea%b4%91%ea%b3%a0%20%ec%a0%9c%ea%b1%b0&source=http%3a%2f%2fminpeter.github.io%2fposts%2fserver%2f2021-09-02-pi-hole%25EC%259D%2584-%25EC%259D%25B4%25EC%259A%25A9%25ED%2595%259C-%25EA%25B4%2591%25EA%25B3%25A0-%25EC%25A0%259C%25EA%25B1%25B0%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg>
</a>
<a target=_blank rel="noopener noreferrer" aria-label="share 📡 pi hole을 이용한 광고 제거 on reddit" href="https://reddit.com/submit?url=http%3a%2f%2fminpeter.github.io%2fposts%2fserver%2f2021-09-02-pi-hole%25EC%259D%2584-%25EC%259D%25B4%25EC%259A%25A9%25ED%2595%259C-%25EA%25B4%2591%25EA%25B3%25A0-%25EC%25A0%259C%25EA%25B1%25B0%2f&title=%f0%9f%93%a1%20pi%20hole%ec%9d%84%20%ec%9d%b4%ec%9a%a9%ed%95%9c%20%ea%b4%91%ea%b3%a0%20%ec%a0%9c%ea%b1%b0"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg>
</a>
<a target=_blank rel="noopener noreferrer" aria-label="share 📡 pi hole을 이용한 광고 제거 on facebook" href="https://facebook.com/sharer/sharer.php?u=http%3a%2f%2fminpeter.github.io%2fposts%2fserver%2f2021-09-02-pi-hole%25EC%259D%2584-%25EC%259D%25B4%25EC%259A%25A9%25ED%2595%259C-%25EA%25B4%2591%25EA%25B3%25A0-%25EC%25A0%259C%25EA%25B1%25B0%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg>
</a>
<a target=_blank rel="noopener noreferrer" aria-label="share 📡 pi hole을 이용한 광고 제거 on whatsapp" href="https://api.whatsapp.com/send?text=%f0%9f%93%a1%20pi%20hole%ec%9d%84%20%ec%9d%b4%ec%9a%a9%ed%95%9c%20%ea%b4%91%ea%b3%a0%20%ec%a0%9c%ea%b1%b0%20-%20http%3a%2f%2fminpeter.github.io%2fposts%2fserver%2f2021-09-02-pi-hole%25EC%259D%2584-%25EC%259D%25B4%25EC%259A%25A9%25ED%2595%259C-%25EA%25B4%2591%25EA%25B3%25A0-%25EC%25A0%259C%25EA%25B1%25B0%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg>
</a>
<a target=_blank rel="noopener noreferrer" aria-label="share 📡 pi hole을 이용한 광고 제거 on telegram" href="https://telegram.me/share/url?text=%f0%9f%93%a1%20pi%20hole%ec%9d%84%20%ec%9d%b4%ec%9a%a9%ed%95%9c%20%ea%b4%91%ea%b3%a0%20%ec%a0%9c%ea%b1%b0&url=http%3a%2f%2fminpeter.github.io%2fposts%2fserver%2f2021-09-02-pi-hole%25EC%259D%2584-%25EC%259D%25B4%25EC%259A%25A9%25ED%2595%259C-%25EA%25B4%2591%25EA%25B3%25A0-%25EC%25A0%259C%25EA%25B1%25B0%2f"><svg viewBox="2 2 28 28"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg>
</a>
</div>
</footer><script src=https://utteranc.es/client.js repo=minpeter/blog-comments issue-term=title theme=photon-dark crossorigin=anonymous async></script>
</article>
</main>
<footer class=footer>
<span>&copy; 2022 <a href=http://minpeter.github.io/>minpeter DEV blog</a></span>
<span>
Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a>
</span>
</footer>
<a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a>
<script>let menu=document.getElementById('menu');menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(a=>{a.addEventListener("click",function(b){b.preventDefault();var a=this.getAttribute("href").substr(1);window.matchMedia('(prefers-reduced-motion: reduce)').matches?document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView({behavior:"smooth"}),a==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${a}`)})})</script>
<script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script>
<script>document.querySelectorAll('pre > code').forEach(b=>{const c=b.parentNode.parentNode,a=document.createElement('button');a.classList.add('copy-code'),a.innerText='copy';function d(){a.innerText='copied!',setTimeout(()=>{a.innerText='copy'},2e3)}a.addEventListener('click',e=>{if('clipboard'in navigator){navigator.clipboard.writeText(b.textContent),d();return}const a=document.createRange();a.selectNodeContents(b);const c=window.getSelection();c.removeAllRanges(),c.addRange(a);try{document.execCommand('copy'),d()}catch(a){}c.removeRange(a)}),c.classList.contains("highlight")?c.appendChild(a):c.parentNode.firstChild==c||(b.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?b.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(a):b.parentNode.appendChild(a))})</script>
</body>
</html>